"use strict";!function(e){var a=Phaser.Loader.prototype.loadFile;Phaser.Loader.prototype.loadFile=function(){var e=this._fileList[this._fileIndex];return this.onFileStart.dispatch(this.progress,e.key,e.url),"font"==e.type?void this.fontLoad(this._fileIndex,e.key,"text","fileComplete","fileError"):"script"!=e.type?void a.call(this):void this.scriptLoad(this._fileIndex,this.baseURL+e.url,"text","fileComplete","fileError")},Phaser.Loader.prototype.scriptLoad=function(e,a,t,s,i){var o=document.createElement("script");o.src=a;var n=this;o.onload=function(){window.setTimeout(function(){n[s](e)},0)},o.onerror=function(){return n[i](e)},document.body.appendChild(o)},Phaser.Loader.prototype.font=function(e,a,t,s){return"undefined"==typeof t&&(t=!1),t!==!1&&"undefined"==typeof s&&(s=t),this.addToFileList("font",e,a,{callback:t,callbackContext:s}),this},Phaser.Loader.prototype.fontLoad=function(e,a,t,s){var i=this._fileList[this._fileIndex];if(this.onFileStart.dispatch(this.progress,i.key,i.url),this.game.device.cocoonJS)return void this[s](e);var o=this,n=document.createElement("span");n.style.fontFamily="Comic Sans MS",n.style.position="fixed",n.style.top="-1000px",n.appendChild(document.createTextNode("`1234567890-=qwertyuiop[]asdfghjkl;'zxcvbnm,./~!@#$%^&*()_+QWERTYUIOP{}ASDFGHJKL:ZXCVBNM<>?")),document.body.appendChild(n);var r=n.getBoundingClientRect();n.style.fontFamily=i.key;var l=function(){var a=n.getBoundingClientRect();if(r.width!=a.width||r.height!=a.height){document.body.removeChild(n);for(var t in PIXI.Text.heightCache)delete PIXI.Text.heightCache[t];o[s](e)}else window.setTimeout(l,100)};window.setTimeout(l,100)};var t=null;e.mt&&e.mt.data&&(t=e.mt.data),e.mt={SPRITE:0,GROUP:1,TEXT:2,TILE_LAYER:3,knownFonts:["Arial","Comic Sans MS","Courier New","Georgia","Impact","Times New Roman","Trebuchet MS","Verdana"],assets:{},objects:{},assetsPath:"assets",game:null,data:t,mainMovie:"__main",autoLoadFonts:!0,init:function(e){this.game=e,this.game.load.crossOrigin="anonymous","2.0.7"==Phaser.VERSION?this.game.load.script("hacks","js/lib/phaserHacks2.0.7.js"):"2.1.3"==Phaser.VERSION?this.game.load.script("hacks","js/lib/phaserHacks2.1.3.js"):this.game.load.script("hacks","js/lib/phaserHacks.js")},setBackgroundColor:function(e){if(this.data.map.backgroundColor){var a=this.data.map.backgroundColor.substring(1),t=parseInt(a,16);this.game.stage.backgroundColor!=t&&this.game.stage.setBackgroundColor(t)}e&&(document.body.style.backgroundColor=this.data.map.backgroundColor)},preload:function(){this._loadAssets(this.data.assets.contents,this.assets,""),this._loadFonts(this.data.objects)},loadGroup:function(e){var a={},t=this.getObjectGroupByName(e);return t?(this._collectAssets(t,a),this._loadAssetBuffer(a),void this._loadFonts(t)):void console.error("failed to load group: ",e)},createAll:function(){var e={};this._loadObjects(this.data.objects.contents,this.game.world,"",e,!0);for(var a in e)this.createTweens(e[a],this.mainMovie);return e},createTweens:function(e,a){var t,s,i=e.mt;if(i.movies={},t=i.movies,s=i.data.movies,void 0==a)for(var o in s)o!=this.mainMovie&&(t[o]=new mt.TweenCollection(o,i));else t[a]=new mt.TweenCollection(a,i)},create:function(e,a){a=a||this.game.world;var t=this.getObjectGroupByName(e);return t?this._add(t,a,""):void console.error("failed to find the object: ",e)},createGroup:function(e,a){return mt.create(e,a)},createSlopeMap:function(e){for(var a={},t=e.layer.data,s=0,i=0;s<t.length;s++)for(i=0;i<t[s].length;i++)t[s][i].index>0&&(a[s*t[s].length+i]=t[s][i].index);return a},getObjectData:function(e,a){if("object"==typeof e&&(e=e.name),a=a||this.data.objects,a.contents)for(var t=0;t<a.contents.length;t++)if(a.contents[t].contents)this.getObjectData(e,a.contents[t]);else if(a.contents[t].name==e)return a.contents[t];return a.name==e?a:void 0},getAssetPath:function(e){return this.assetsPath+e.fullPath},getObjectGroupByName:function(e,a){a=a||this.data.objects.contents;for(var t,s=0;s<a.length;s++){if(a[s].name==e)return a[s];if(a[s].contents&&(t=this.getObjectGroupByName(e,a[s].contents)))return t}},getAssetByName:function(e,a){a=a||this.data.assets.contents;var t;for(var s in a){if(a[s].name==e)return a[s];if(a[s].contents&&(t=this.getAssetById(id,a[s].contents)))return t}return t},getAssetById:function(e,a){a=a||this.data.assets.contents;var t=null;for(var s in a){if(a[s].id==e)return a[s];if(a[s].contents&&(t=this.getAssetById(e,a[s].contents)))return t}return t},getObjectByName:function(e,a){a=a||this.data.objects.contents;var t;for(var s in a){if(a[s].name==e)return a[s];if(a[s].contents&&(t=this.getObjectById(id,a[s].contents)))return t}return t},physics:{ninja:{enableTileLayer:function(e){e=e.layer;for(var a=0,t=e.height;t>a;a++)for(var s=0,i=e.width;i>s;s++){var o=e.data[a][s];if(o&&o.index>0){var n=new Phaser.Physics.Ninja.Body(this,null,3,o.index,0,o.worldX+o.centerX,o.worldY+o.centerY,o.width,o.height);e.bodies.push(n)}}return e.bodies}}},_loadAssetBuffer:function(e){var a,t=null;for(var s in e)t=e[s],a=this._getAssetContainer(t),this._addAsset(t,a)},_loadFonts:function(e){for(var a,t=0;t<e.contents.length;t++)if(a=e.contents[t],a.contents)this._loadFonts(a);else if(a.type==mt.TEXT){if(-1!=this.knownFonts.indexOf(a.style.fontFamily))continue;this.game.load.font(a.style.fontFamily)}},_mkDiff:function(e,a){var t={};for(var s in e)"keyframe"!=s&&"object"!=typeof e[s]&&void 0!==e[s]&&e[s]!=a[s]&&(t[s]=a[s]-e[s]+"");for(var s in a)"keyframe"!=s&&"object"!=typeof a[s]&&void 0!==e[s]&&e[s]!=a[s]&&(t[s]=a[s]-e[s]+"");return t},_getAssetContainer:function(e){var a=this.assets,t=e.fullPath.split("/");t.shift();for(var s=0;s<t.length-1;s++)a[t[s]]=a[t[s]]||{},a=a[t[s]];return a},_getObjectContainer:function(e){var a=this.objects,t=e.fullPath.split("/");t.shift();for(var s=0;s<t.length-1;s++)a[t[s]]=a[t[s]]||{},a=a[t[s]];return a},_collectAssets:function(e,a){for(var t,s,i,o=0;o<e.contents.length;o++)s=e.contents[o],s.contents&&this._collectAssets(s,a),t=s.assetId,i=this.getAssetById(t),i&&(a[t]=i)},_loadAssets:function(e,a){for(var t=null,s=0,i=e.length;i>s;s++)t=e[s],t.contents&&t.contents.length?(void 0===a[t.name]&&(a[t.name]={}),this._loadAssets(t.contents,a[t.name])):this._addAsset(t,a)},_addAsset:function(e,a){e.key&&(a[e.name]||(e.atlas?this.game.load.atlas(e.key,this.assetsPath+e.fullPath,this.assetsPath+e.atlas,null,e.type):e.width!=e.frameWidth||e.height!=e.frameHeight?this.game.load.spritesheet(e.key,this.assetsPath+e.fullPath,e.frameWidth,e.frameHeight,e.frameMax,e.margin,e.spacing):this.game.load.image(e.key,this.assetsPath+e.fullPath),Object.defineProperty(a,e.name,{get:function(){return e},enumerable:!0})))},_loadObjects:function(e,a,t,s,i){a=a||this.game.world,t=""!==t?"."+t:t;for(var o=e.length-1;o>-1;o--)s[e[o].name]=this._add(e[o],a,t,i)},_add:function(e,a,t,s){var i=null;return e.type==this.GROUP?(i=this._addGroup(e),e.physics&&e.physics.enable&&(i.enableBody=!0),a.add(i),i.mt={self:i,data:e,children:{}},this._updateCommonProperties(e,i,s),this._loadObjects(e.contents,i,t+e.name,i.mt.children,s)):(e.type==this.TEXT?i=this._addText(e,a):e.type==this.TILE_LAYER?(i=this._addTileLayer(e,a),e.physics&&e.physics.enable&&i.map.setCollisionByExclusion([-1])):(i=this._addObject(e,a),this.addPhysics(e,i,a.mt?a.mt.data:null)),this._updateCommonProperties(e,i,s),i.mt={self:i,data:e,children:{}},e.contents&&this._loadObjects(e.contents,i,t+e.name,i.mt.children,s)),i.self=i,i.getData=function(){return this.mt.data},i},addPhysics:function(e,a,t){var s=e.physics;if(s&&s.enable||t&&t.physics&&t.physics.enable&&(s=t.physics),s&&s.enable){this.game.physics.arcade.enable(a),a.body.allowGravity=s.gravity.allow,a.body.gravity.x=s.gravity.x,a.body.gravity.y=s.gravity.y,a.body.immovable=s.immovable,a.body.bounce=s.bounce,a.body.maxAngular=s.rotation.maxAngular,a.body.allowRotation=s.rotation.allowRotation,a.body.maxVelocity=s.maxVelocity,a.body.mass=s.mass,a.body.collideWorldBounds=s.collideWorldBounds;var i=a.width,o=a.height;s.size.width>0&&(i=s.size.width),s.size.height>0&&(o=s.size.height),a.body.setSize(i,o,s.size.offsetX,s.size.offsetY)}},_addGroup:function(e){var a=this.game.add.group();return a.x=e.x,a.y=e.y,a.fixedToCamera=!!e.fixedToCamera,e.angle&&(a.angle=e.angle),a.alpha=e.alpha||1,a},_addText:function(e,a){a=a||this.game.world;var t=this.game.add.text(e.x,e.y,e.text||e.name,e.style);return a.add(t),t},_addTileLayer:function(e,a){a=a||this.game.world;var t=this.game.add.tilemap(null,e.tileWidth,e.tileHeight,e.widthInTiles,e.heightInTiles),s=t.createBlankLayer(e.name,e.widthInTiles,e.heightInTiles,e.tileWidth,e.tileHeight,a),i=0,o=null,n="";if(!e.images)return s;for(var r=0;r<e.images.length;r++)n=this.getAssetById(e.images[r]),n?(o=t.addTilesetImage(n.key,n.key,n.frameWidth,n.frameHeight,n.margin,n.spacing,i),i+=o.total):console.warn("cannot find image",e.images[r]);var l=e.tiles,c=null;for(var h in l)for(var d in l[h])c=t.putTile(l[h][d],parseInt(d,10),parseInt(h,10),s);return s.fixedToCamera=e.isFixedToCamera,s},_addObject:function(e,a){var t=null;a=a||this.game.world,a.type==Phaser.GROUP?t=a.create(e.x,e.y,e.assetKey):(t=this.game.add.sprite(e.x,e.y,e.assetKey),this.game.world.removeChild(t),a.addChild(t));var s=this.game.cache.getFrameData(e.assetKey);if(s){for(var i=[],o=0;o<s.total;o++)i.push(o);t.animations.add("default",i,void 0!==e.fps?e.fps:10,!1),t.frame=e.frame}return t},_updateCommonProperties:function(e,a,t){e.angle&&(a.angle=e.angle),e.type!==mt.GROUP&&a.type!=Phaser.GROUP&&(a.anchor.x=e.anchorX,a.anchor.y=e.anchorY,void 0!=e.scaleX&&(a.scale.x=e.scaleX,a.scale.y=e.scaleY)),a.x=e.x,a.y=e.y,a.alpha=e.alpha||1,t&&(a.visible=e.isVisible)},_markDirty:function(e){e=e||game.world.children;for(var a=null,t=0;t<e.length;t++)a=e[t],a.type!=Phaser.TEXT?a.type==Phaser.GROUP&&this.markDirty(a.children):a.dirty=!0}}}("undefined"==typeof window?global:window),window.mt=window.mt||{},window.mt.data={assets:{name:"assets",contents:[{name:"Sounds",contents:[],count:0,id:"f06ee1ed-68a9-4a9d-81cd-5be8ba94b936",fullPath:"/Sounds",isClosed:!0,physics:{enable:0}},{name:"Grounds",contents:[{id:"f97b0486-b445-492c-ae23-116918949073",name:"groundSnow.png",fullPath:"/Grounds/groundSnow.png",key:"/groundSnow.png",width:808,height:71,frameWidth:808,frameHeight:71,frameMax:-1,margin:0,spacing:0,anchorX:0,anchorY:0,fps:10,updated:1438761916113,atlas:""},{id:"0a5dd3ad-aad6-48d5-a119-5a82678b319d",name:"groundIce.png",fullPath:"/Grounds/groundIce.png",key:"/groundIce.png",width:808,height:71,frameWidth:808,frameHeight:71,frameMax:-1,margin:0,spacing:0,anchorX:0,anchorY:0,fps:10,updated:1438761500716,atlas:""},{id:"94cafff3-91fe-4874-bc64-c183ebe16fe1",name:"groundGrass.png",fullPath:"/Grounds/groundGrass.png",key:"/groundGrass.png",width:808,height:71,frameWidth:808,frameHeight:71,frameMax:-1,margin:0,spacing:0,anchorX:0,anchorY:0,fps:10,updated:1432965558592,atlas:""}],count:0,id:"f8599ef3-14d2-4986-9f47-76fe206e049c",fullPath:"/Grounds",isClosed:!0},{name:"Loading",contents:[{id:"f0eea09b-51bb-4d7c-9cde-fdb574b531bf",name:"preload.png",fullPath:"/Loading/preload.png",key:"/Loading/2.png",width:190,height:9,frameWidth:190,frameHeight:9,frameMax:-1,margin:0,spacing:0,anchorX:0,anchorY:0,fps:10,updated:1433223741996,atlas:""}],count:0,id:"7b27cfd3-43a9-4135-b3aa-bce4cd754067",fullPath:"/Loading",isClosed:!0},{id:"dcdf4514-30ef-4115-9cb1-0a2652bccdb9",name:"background.png",fullPath:"/background.png",key:"/background.png",width:800,height:480,frameWidth:800,frameHeight:480,frameMax:-1,margin:0,spacing:0,anchorX:0,anchorY:0,fps:10,updated:1432965558557,atlas:""},{id:"launcher",name:"launcher.png",fullPath:"/launcher.png",key:"/launcher.png",width:128,height:128,frameWidth:128,frameHeight:128,frameMax:-1,margin:0,spacing:0,anchorX:0,anchorY:0,fps:10,updated:1406817915034,atlas:""},{id:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",name:"spritesheet.png",fullPath:"/spritesheet.png",key:"/spritesheet/spritesheet.png",width:1141,height:1186,frameWidth:1141,frameHeight:1186,frameMax:-1,margin:0,spacing:0,anchorX:0,anchorY:0,fps:10,updated:1437543792944,atlas:"/spritesheet.json",physics:{enable:0},type:0}],count:98},objects:{name:"objects",contents:[{x:279,y:18.75,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:50,font:" 50px 'Arial'",fill:"#ffffff",align:"left",stroke:"#000000",strokeThickness:8,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0,fontWeight:""},align:"left",wordWrap:0,isVisible:!0,isLocked:0,text:"123",id:"tmp1436776727422",name:"ScoreText",index:-1,fullPath:"/ScoreText",shadow:{},physics:{enable:0},userData:{},movies:{__main:{frames:[],info:{fps:60},subdata:[]}},fill:"#ffffff",stroke:"#000000",strokeThickness:8},{id:"tmp1432983985050",name:"GameOverUI",x:0,y:0,type:1,angle:0,contents:[{x:361,y:406,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:14,font:"bold 14px 'Arial'",fill:"#ff0000",align:"left",stroke:"#ffffff",strokeThickness:4,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0,fontWeight:"bold"},align:"left",wordWrap:0,isVisible:1,isLocked:0,text:"NEW",id:"tmp1437979123772",name:"NewScoreTitle",index:-1,fullPath:"/GameOverUI/NewScoreTitle",shadow:{},physics:{enable:0},userData:{},movies:{gameOverUp:{frames:[],info:{fps:60}}},fill:"#ff0000",stroke:"#ffffff",strokeThickness:4},{x:398.66666666666663,y:399.1666666666667,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:32,font:" 32px 'Arial'",fill:"#ffffff",align:"left",stroke:"#000000",strokeThickness:8,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0},align:"left",wordWrap:0,isVisible:1,isLocked:0,text:"0",id:"tmp1436776727430",name:"BestScoreText",index:-1,fullPath:"/GameOverUI/BestScoreText",shadow:{},physics:{enable:0},userData:{},movies:{gameOverUp:{frames:[],info:{fps:60,lastFrame:60}}},stroke:"#000000",strokeThickness:8,fill:"#ffffff"},{x:262.00000000000006,y:502.66666666666674,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:32,font:" 32px 'Arial'",fill:"#ffffff",align:"left",stroke:"#000000",strokeThickness:8,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0},align:"left",wordWrap:0,isVisible:1,isLocked:0,text:"Start",id:"tmp1437488401832",name:"StartText",index:-1,fullPath:"/GameOverUI/StartText",shadow:{},physics:{enable:0},userData:{},movies:{gameOverUp:{frames:[],info:{fps:60,lastFrame:60}}},fill:"#ffffff",stroke:"#000000",strokeThickness:8},{x:399.16666666666646,y:329.08333333333337,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:32,font:" 32px 'Arial'",fill:"#ffffff",align:"left",stroke:"#000000",strokeThickness:8,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0},align:"left",wordWrap:0,isVisible:1,isLocked:0,text:"0",id:"tmp1436776727429",name:"ScoreText",index:-1,fullPath:"/GameOverUI/ScoreText",shadow:{},physics:{enable:0},userData:{},movies:{gameOverUp:{frames:[],info:{fps:60,lastFrame:60}}},fill:"#ffffff",stroke:"#000000",strokeThickness:8},{x:117,y:312,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:32,font:" 32px 'Arial'",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:8,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0},align:"center",wordWrap:!1,isVisible:1,isLocked:0,text:"Medal",id:"tmp1436776727425",name:"MedalTitle",index:-1,fullPath:"/GameOverUI/MedalTitle",shadow:{},physics:{enable:0},userData:{},movies:{__main:{frames:[],info:{fps:60},subdata:[]},gameOverUp:{frames:[],info:{fps:60,lastFrame:60}}},fill:"#ffffff",stroke:"#000000",strokeThickness:8},{x:265.75,y:399,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:32,font:" 32px 'Arial'",fill:"#ffffff",align:"left",stroke:"#000000",strokeThickness:8,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0},align:"left",wordWrap:0,isVisible:1,isLocked:0,text:"Best",id:"tmp1436776727428",name:"BestTitle",index:-1,fullPath:"/GameOverUI/BestTitle",shadow:{},physics:{enable:0},userData:{},movies:{gameOverUp:{frames:[],info:{fps:60,lastFrame:60}}},fill:"#ffffff",stroke:"#000000",strokeThickness:8},{x:260,y:326,type:2,anchorX:0,anchorY:0,scaleX:1,scaleY:1,angle:0,alpha:1,wordWrapWidth:100,style:{fontFamily:"Arial",fontSize:32,font:" 32px 'Arial'",fill:"#ffffff",align:"left",stroke:"#000000",strokeThickness:8,wordWrap:!1,wordWrapWidth:100,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0)",shadowBlur:0},align:"left",wordWrap:0,isVisible:1,isLocked:0,text:"Score",id:"tmp1436776727427",name:"ScoreTitle",index:-1,fullPath:"/GameOverUI/ScoreTitle",shadow:{},physics:{enable:0},userData:{},movies:{gameOverUp:{frames:[],info:{fps:60,lastFrame:60}}},stroke:"#000000",strokeThickness:8,fill:"#ffffff"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:90,y:186,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:40,isVisible:1,isLocked:0,contents:[],width:412,height:78,frameName:"textGameOver",id:"tmp1437848456252",name:"textGameOver",index:-1,fullPath:"/GameOverUI/textGameOver",movies:{gameOverUp:{frames:[],info:{fps:60}}},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:124.16666666666673,y:362.8333333333334,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:.6929824561403509,scaleY:.7,angle:0,alpha:1,frame:35,isVisible:!0,isLocked:0,contents:[],width:79,height:83.3,frameName:"medalSilver",id:"tmp1437848456254",name:"medal",index:-1,fullPath:"/GameOverUI/medal",movies:{gameOverUp:{frames:[],info:{fps:60}}},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:96,y:297,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:2.0969387755102042,scaleY:2.7,angle:0,alpha:1,frame:31,isVisible:!0,isLocked:0,contents:[],width:411.00000000000006,height:189,frameName:"buttonLarge",id:"tmp1437848456253",name:"buttonLarge",index:-1,fullPath:"/GameOverUI/buttonLarge",movies:{gameOverUp:{frames:[],info:{fps:60}}},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:240,y:495.0000000000001,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:1,scaleY:.775,angle:0,alpha:1,frame:32,isVisible:1,isLocked:0,contents:[],width:136,height:62,frameName:"buttonSmall",id:"tmp1437848456255",name:"startButton",index:-1,fullPath:"/GameOverUI/startButton",movies:{gameOverUp:{frames:[],info:{fps:60}}},assetKey:"/spritesheet/spritesheet.png"}],isVisible:!1,isLocked:0,isFixedToCamera:0,isClosed:!0,scaleX:1,scaleY:1,alpha:1,fullPath:"/GameOverUI",physics:{enable:0},userData:{},movies:{__main:{frames:[],info:{fps:60},subdata:[{id:.19274562923237681,objectId:"tmp1432983985050",name:"gameOverUp",movies:{__main:{frames:[],info:{fps:60,lastFrame:60}}},submovie:!0,fullPath:"/GameOverUI/gameOverUp",info:{fps:60,lastFrame:60}}]},gameOverUp:{frames:[{x:0,y:0,angle:0,scaleX:1,scaleY:1,alpha:1,keyframe:0}],info:{fps:60,lastFrame:60}}},autoframe:!0,keyframe:0},{id:"tmp1432965526137",name:"IntroUI",x:0,y:0,type:1,angle:0,contents:[{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:94.44444444444444,y:232.11111111111111,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:41,isVisible:1,isLocked:0,contents:[],width:400,height:73,frameName:"textGetReady",id:"tmp1437848456256",name:"textGetReady",index:-1,fullPath:"/IntroUI/textGetReady",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:354.5454545454545,y:461.27272727272725,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:38,isVisible:1,isLocked:0,contents:[],width:85,height:42,frameName:"tapRight",id:"tmp1437847158454",name:"tapRight",index:-1,fullPath:"/IntroUI/tapRight",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:161.8181818181818,y:463.09090909090907,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:37,isVisible:1,isLocked:0,contents:[],width:85,height:42,frameName:"tapLeft",id:"tmp1437847158453",name:"tapLeft",index:-1,fullPath:"/IntroUI/tapLeft",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:264.99999999999994,y:453.99999999999994,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:36,isVisible:1,isLocked:0,contents:[],width:59,height:59,frameName:"tap",id:"tmp1437837146319",name:"tap",index:-1,fullPath:"/IntroUI/tap",movies:{},assetKey:"/spritesheet/spritesheet.png"}],isVisible:!1,isLocked:0,isFixedToCamera:0,isClosed:!0,scaleX:1,scaleY:1,alpha:1,fullPath:"/IntroUI",physics:{enable:0,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},userData:{},movies:{__main:{frames:[],info:{fps:60,lastFrame:60},subdata:[]}},keyframe:0,easings:{},frame:41},{id:"tmp1406818026618",name:"Loading",x:0,y:0,angle:0,contents:[],isVisible:!1,isLocked:!0,isFixedToCamera:0,fullPath:"/Loading",isClosed:!0,movies:{__main:{frames:[],info:{fps:60},subdata:[]}},type:1,alpha:1,physics:{enable:0},userData:{}},{id:"tmp1436022781515",name:"RocksGroup",x:819.2857142857135,y:21.9999999999999,type:1,angle:0,contents:[{id:"tmp1436022781513",name:"Group 0",x:0,y:0,type:1,angle:0,contents:[{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:189.42857142857142,y:405,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:17,isVisible:!0,isLocked:0,contents:[],width:39,height:38,frameName:"starGold",id:"tmp1437937431641",name:"star",index:-1,fullPath:"/RocksGroup/Group 0/star",movies:{__main:{frames:[],info:{fps:60},subdata:[]}},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:179,y:699.3333333333327,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:50,height:240,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1.3981481481481481,scaleY:2.079497907949791,angle:0,alpha:1,frame:10,isVisible:!0,isLocked:0,contents:[],width:151,height:497,frameName:"rockGrass",id:"tmp1437543753384",name:"rockGrass",index:-1,fullPath:"/RocksGroup/Group 0/rockGrass",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:179.92857142857181,y:-21,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:50,height:240,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1.3981481481481481,scaleY:1.799163179916318,angle:0,alpha:1,frame:11,isVisible:!0,isLocked:0,contents:[],width:151,height:430,frameName:"rockGrassDown",id:"tmp1437543753383",name:"rockGrassDown",index:-1,fullPath:"/RocksGroup/Group 0/rockGrassDown",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:187.33333333333346,y:205.83333333333334,type:0,anchorX:0,anchorY:0,userData:{scoreTag:"0"},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:.078125,scaleY:2.8250276547318967,angle:0,alpha:1,frame:32,isVisible:1,isLocked:0,contents:[],width:10,height:226.00221237855175,id:"tmp1436357710376",name:"launcher",index:-1,fullPath:"/RocksGroup/Group 0/launcher",movies:{},frameName:"buttonSmall",assetKey:"/spritesheet/spritesheet.png"}],isVisible:!0,isLocked:0,isFixedToCamera:0,isClosed:!0,scaleX:1,scaleY:1,alpha:1,fullPath:"/RocksGroup/Group 0",physics:{enable:0},userData:{scoreTag:"0"},movies:{}},{id:"tmp1436022781514",name:"Group 1",x:0,y:0,type:1,angle:0,contents:[{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:-119.64285714285758,y:252.0714285714281,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:17,isVisible:1,isLocked:0,contents:[],width:39,height:38,frameName:"starGold",id:"tmp1437901769210",name:"star",index:-1,fullPath:"/RocksGroup/Group 1/star",movies:{__main:{frames:[],info:{fps:60},subdata:[]}},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:-138.73809523809538,y:-13.66666666666671,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:50,height:240,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1.3981481481481481,scaleY:1.799163179916318,angle:0,alpha:1,frame:11,isVisible:!0,isLocked:0,contents:[],width:151,height:430,frameName:"rockGrassDown",id:"tmp1437837146314",name:"rockGrassDown",index:-1,fullPath:"/RocksGroup/Group 1/rockGrassDown",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:-135.33333333333368,y:702.6666666666662,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:50,height:240,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1.3981481481481481,scaleY:2.079497907949791,angle:0,alpha:1,frame:10,isVisible:!0,isLocked:0,contents:[],width:151,height:497,frameName:"rockGrass",id:"tmp1437837146312",name:"rockGrass",index:-1,fullPath:"/RocksGroup/Group 1/rockGrass",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:-127.45238095238037,y:203.66666666666663,type:0,anchorX:0,anchorY:0,userData:{scoreTag:"0"},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:.078125,scaleY:3.004965116023764,angle:0,alpha:1,frame:32,isVisible:1,isLocked:0,contents:[],width:10,height:240.3972092819011,id:"tmp1436357710375",name:"launcher",index:-1,fullPath:"/RocksGroup/Group 1/launcher",movies:{},frameName:"buttonSmall",assetKey:"/spritesheet/spritesheet.png"}],isVisible:1,isLocked:0,isFixedToCamera:0,isClosed:!0,scaleX:1,scaleY:1,alpha:1,fullPath:"/RocksGroup/Group 1",physics:{enable:0},userData:{scoreTag:"1"},movies:{}},{id:"tmp1436022781512",name:"Group 2",x:0,y:0,type:1,angle:0,contents:[{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:483,y:248,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1,scaleY:1,angle:0,alpha:1,frame:17,isVisible:!0,isLocked:0,contents:[],width:39,height:38,frameName:"starGold",id:"tmp1437937431639",name:"star",index:-1,fullPath:"/RocksGroup/Group 2/star",movies:{__main:{frames:[],info:{fps:60},subdata:[]}},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:464.59523809523745,y:-13.666666666666693,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:50,height:240,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1.3981481481481481,scaleY:1.799163179916318,angle:0,alpha:1,frame:11,isVisible:!0,isLocked:0,contents:[],width:151,height:430,frameName:"rockGrassDown",id:"tmp1437837146318",name:"rockGrassDown",index:-1,fullPath:"/RocksGroup/Group 2/rockGrassDown",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:459.66666666666566,y:699.3333333333312,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:50,height:240,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:1.3981481481481481,scaleY:2.079497907949791,angle:0,alpha:1,frame:10,isVisible:!0,isLocked:0,contents:[],width:151,height:497,frameName:"rockGrass",id:"tmp1437837146316",name:"rockGrass",index:-1,fullPath:"/RocksGroup/Group 2/rockGrass",movies:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:475.7142857142857,y:213.5,type:0,anchorX:0,anchorY:0,userData:{scoreTag:"0"},physics:{enable:1,immovable:1,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},scaleX:.06893382849335551,scaleY:2.7903337032835034,angle:0,alpha:1,frame:32,isVisible:1,isLocked:0,contents:[],width:9.37500067509635,height:223.22669626268026,id:"tmp1436357710377",name:"launcher",index:-1,fullPath:"/RocksGroup/Group 2/launcher",movies:{},frameName:"buttonSmall",assetKey:"/spritesheet/spritesheet.png"}],isVisible:!0,isLocked:0,isFixedToCamera:0,isClosed:!1,scaleX:1,scaleY:1,alpha:1,fullPath:"/RocksGroup/Group 2",physics:{enable:0},userData:{},movies:{}}],isVisible:!0,isLocked:0,isFixedToCamera:0,isClosed:!0,scaleX:1,scaleY:1,alpha:1,fullPath:"/RocksGroup",physics:{enable:1,immovable:0,bounce:{x:0,y:0},gravity:{allow:0,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0},userData:{},movies:{__main:{frames:[],info:{fps:60},subdata:[]}}},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:295,y:360,type:0,anchorX:.5,anchorY:.5,userData:{},physics:{enable:1,immovable:0,bounce:{x:0,y:.3},gravity:{allow:1,x:0,y:1e3},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:1},scaleX:1,scaleY:1,angle:0,alpha:1,frame:30,isVisible:!0,isLocked:0,contents:[],width:88,height:73,frameName:"planeYellow3",id:"tmp1437847158449",name:"plane",index:-1,fullPath:"/plane",movies:{__main:{frames:[],info:{fps:60},subdata:[{id:.5852274044882506,objectId:"tmp1437847158449",name:"introPlaneMove",movies:{__main:{frames:[],info:{fps:12,lastFrame:24}}},submovie:!0,fullPath:"/plane/introPlaneMove",info:{fps:12,lastFrame:24}}]},introPlaneMove:{frames:[{x:295,y:360,angle:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,alpha:1,frame:30,assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",keyframe:0,easings:{}},{x:295,y:399,angle:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,alpha:1,frame:29,assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",keyframe:12,easings:{}},{x:295,y:360,angle:0,anchorX:.5,anchorY:.5,scaleX:1,scaleY:1,alpha:1,frame:30,assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",keyframe:24,easings:{}}],info:{fps:12,lastFrame:24}}},keyframe:0,easings:{},assetKey:"/spritesheet/spritesheet.png"},{assetId:"0992f177-2f45-49e6-92ca-f3a1e1c9f9fb",x:62.666666666666664,y:0,type:0,anchorX:0,anchorY:0,userData:{},physics:{enable:0},scaleX:1,scaleY:1.7,angle:0,
alpha:1,frame:0,isVisible:!1,isLocked:0,contents:[],width:800,height:816,id:"tmp1437543753382",name:"background",index:-1,fullPath:"/background",movies:{__main:{frames:[],info:{fps:60},subdata:[]}},assetKey:"/spritesheet/spritesheet.png"}],count:0},map:{cameraX:1009.7000000000002,cameraY:229.10000000000002,worldWidth:800,worldHeight:480,viewportWidth:600,viewportHeight:800,scaleMode:"SHOW_ALL",gridX:100,gridY:100,gridOffsetX:0,gridOffsetY:0,showGrid:1,gridOpacity:1,backgroundColor:"#222222",movieInfo:{fps:60,lastFrame:42},pixelPerfectPicking:1,physics:{enable:1,immovable:0,bounce:{x:1,y:1},gravity:{allow:1,x:0,y:0},size:{width:-1,height:-1,offsetX:0,offsetY:0},rotation:{allowRotation:0,maxAngular:0},maxVelocity:0,mass:1,collideWorldBounds:0}}},window.Tplane={game:null,main:function(){this.game=new Phaser.Game(mt.data.map.viewportWidth,mt.data.map.viewportHeight,Phaser.AUTO,document.body,window.Tplane.state.boot)},state:{}},window.addEventListener("DOMContentLoaded",function(){window.Tplane.main()},!1);var orientated=!1;window.Tplane.state.boot={preload:function(){this.game.world.setBounds(0,0,mt.data.map.worldWidth,mt.data.map.worldHeight),this.enableScaling(),mt.init(this.game),mt.setBackgroundColor(!0),mt.loadGroup("Loading")},create:function(){for(var e in window.Tplane.state)this.game.state.add(e,window.Tplane.state[e]);this.game.device.desktop||(this.scale.pageAlignVertically=!0,this.scale.pageAlignHorizontally=!0,this.scale.forceOrientation(!0,!1)),this.game.state.start("load")},enableScaling:function(){var e=this.game;e.scale.parentIsWindow=e.canvas.parentNode==document.body,e.scale.scaleMode=Phaser.ScaleManager[mt.data.map.scaleMode]}},window.Tplane.state.load={preload:function(){var e=mt.create("Loading"),a=e,t=e.mt.children.preload;if(t){this.load.setPreloadSprite(t),a.updateTransform();var s=a.getBounds();a.x=this.game.camera.screenView.centerX-.5*s.width-s.x,a.y=this.game.camera.screenView.centerY-s.height-s.y}mt.preload()},create:function(){this.game.state.start("play")}},window.Tplane.state.menu={preload:function(){},create:function(){},update:function(){}};var stateSTART=null,stateRUNNING=null,stateEND=null,stateCLICKED=null,stateGAMEOVER=null,FONT_NAME="TappyFont",ROCK_VELOCITY=250,JUMP_VELOCITY=500,GRAVITY=1700,ENABLE_ENEMY=!1,game=null,prevRockPositions=[],score=0,bestScore=0,medal=null,starArray=["starGold","starSilver","starBronze"],medalArray=["medalGold","medalSilver","medalBronze"],envArray=["Ice","Grass","Snow"],jumpSound=null,collectSound=null,gameOverSound=null;window.Tplane.state.play={preload:function(){game=this.game,game.load.audio("jump","jump.mp3"),game.load.audio("gameOver","game_over1.mp3"),game.load.audio("collect","collect.mp3")},create:function(){bestScore=null==localStorage.getItem("score")?0:localStorage.getItem("score"),this.bg=game.add.tileSprite(0,0,600,800,"/background.png"),this.bg.tileScale.y=1.5,this.scoreText=mt.create("ScoreText"),this.scoreText.font=FONT_NAME,this.scoreText.fontSize=50,game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,jumpSound=game.add.audio("jump"),collectSound=game.add.audio("collect"),gameOverSound=game.add.audio("gameOver"),this.rocks=mt.create("RocksGroup"),this.plane=mt.create("plane"),this.plane.animations.add("fly",[28,29,30],12,!0),this.enemy=mt.create("plane"),this.enemy.body.allowGravity=!1,this.enemy.body.collideWorldBounds=!1,this.enemy.frameName="planeRed1",this.enemy.scaleX=-1,this.enemy.animations.add("fly",[25,26,27],12,!0),this.enemy.animations.play("fly"),this.enemy.position.x=700,this.gameOverUI=mt.create("GameOverUI"),this.gameOverUI.setAll("alpha",0),this.introUI=mt.create("IntroUI"),game.input.onDown.add(function(){stateRUNNING||stateGAMEOVER||(stateSTART=!0,stateRUNNING=!0),stateCLICKED=!0});var e=this.introUI.mt.children.tap;mt.createTweens(this.plane),this.planeAnim=this.plane.mt.movies.introPlaneMove,this.showIntroAnim();var a=!0;game.time.events.loop(Phaser.Timer.SECOND,function(){a?e.frameName="tapTick":e.frameName="tap",a=!a},this),game.world.swap(this.scoreText,this.rocks);var t=this.gameOverUI.mt.children;this.gameOverUI.forEach(function(e){e instanceof Phaser.Text&&(e.font=FONT_NAME)}),medal=t.medal,t.startButton.inputEnabled=!0,t.startButton.events.onInputUp.add(function(){stateGAMEOVER&&(stateGAMEOVER=!1,stateCLICKED=!0)},this),this.updateGameEnv()},tweetscore:function(){var e="http://twitter.com/home?status=",a="I scored 100 at this game -"+window.location.href+".",t=e+encodeURIComponent(a);window.open(t,"_blank")},startGame:function(){this.introUI.setAll("alpha",0),this.planeAnim.stop(),this.plane.body.gravity.y=GRAVITY,this.bg.autoScroll(-50,0),this.ground.autoScroll(-200,0),this.moveObstacles(ROCK_VELOCITY),this.spawnEnemy()},stopGame:function(){this.bg.autoScroll(0,0),this.ground.autoScroll(0,0),this.moveObstacles(0),this.showGameOverUI(),this.plane.animations.stop()},updateGameEnv:function(){var e=game.rnd.integerInRange(0,2),a=envArray[e];this.rocks.forEach(function(e){e.forEach(function(e){if("launcher"==e.getData().name)e.alpha=0;else if("star"==e.getData().name){var t=game.add.tween(e).to({angle:360},2e3,Phaser.Easing.Linear.None,!0);t.repeat(-1)}else e.frameName.indexOf("Down")>-1?e.frameName="rock"+a+"Down":e.frameName="rock"+a;var s={x:e.position.x};prevRockPositions.push(s)})}),this.ground&&this.ground.destroy(),this.ground=game.add.tileSprite(0,game.height-71,808,71,"/ground"+a+".png"),game.physics.arcade.enableBody(this.ground)},spawnEnemy:function(){ENABLE_ENEMY&&(this.enemy.body.velocity.x=-500,this.enemy.body.velocity.y=0,this.enemy.position.y=game.rnd.integerInRange(200,game.world.width-200),this.enemy.position.x=700)},updateScore:function(){this.scoreText.text=score},update:function(){this.updateScore(),stateSTART&&(console.log("state START"),stateSTART=!1,this.startGame()),stateCLICKED&&stateRUNNING&&(console.log("state CLICKED"),stateCLICKED=!1,this.makeAJump(),this.enemy.position.x<-50&&this.spawnEnemy()),stateCLICKED&&!stateGAMEOVER&&(stateCLICKED=!1,score=0,this.showIntroAnim(),this.gameOverUI.setAll("alpha",0),this.rePositionObstacles(),this.updateGameEnv()),stateRUNNING&&(console.log("state RUNNING"),this.spawnObstacles(!0),this.updateGamePhysics(this),this.plane.angle<10&&(this.plane.angle+=2.5)),stateEND&&(console.log("state END"),stateEND=!1,stateRUNNING=!1,stateGAMEOVER=!0,this.stopGame(),gameOverSound.play())},spawnObstacles:function(){this.rocks.forEach(function(e){var a=!1;if(e.forEach(function(e){if(e.position.x<-900)if(e.position.x=0,a=!0,"launcher"==e.getData().name)e.hasScored=!1;else if("star"==e.getData().name){Phaser.Math.chanceRoll()?e.alpha=1:e.alpha=0;var t=game.rnd.integerInRange(1,3);e.frameName=starArray[t-1]}}),a){var t=game.rnd.integerInRange(-150,150);e.position.y=t,a=!a}})},showGameOverUI:function(){score>=bestScore?this.changeMedal(1):Math.abs(bestScore-score)<5?this.changeMedal(2):this.changeMedal(3),this.gameOverUI.setAll("alpha",1),game.add.tween(this.gameOverUI).from({y:800},1e3,Phaser.Easing.Bounce.Out,!0),score>bestScore?(bestScore=score,localStorage.setItem("score",""+score),this.gameOverUI.mt.children.NewScoreTitle.fontSize=14,this.gameOverUI.mt.children.NewScoreTitle.text="NEW "):this.gameOverUI.mt.children.NewScoreTitle.text=" ",this.gameOverUI.mt.children.ScoreText.text=score,this.gameOverUI.mt.children.BestScoreText.text=bestScore,this.gameOverUI.mt.children.MedalTitle.text="MEDAL",this.gameOverUI.mt.children.ScoreTitle.text="SCORE",this.gameOverUI.mt.children.BestTitle.text="BEST",this.gameOverUI.mt.children.StartText.text="START"},showIntroAnim:function(){this.introUI.setAll("alpha",1),this.gameOverUI.setAll("alpha",0),this.plane.body.gravity.y=0,this.planeAnim.start(),this.planeAnim.isLooping=!0,this.plane.animations.play("fly")},changeMedal:function(e){medal.frameName=medalArray[e-1]},changeStar:function(e,a){e.frameName=starArray[a-1]},moveObstacles:function(e){this.rocks.forEach(function(a){if(0!==e){var t=game.rnd.integerInRange(-200,200);a.position.y=t}a.setAll("body.velocity.x",-1*e)})},makeAJump:function(){this.plane.body.velocity.y=-1*JUMP_VELOCITY,game.add.tween(this.plane).to({angle:-20},100).start(),jumpSound.play()},rePositionObstacles:function(){var e=0;this.rocks.forEach(function(a){a.forEach(function(a){a.hasScored=!1,"star"==a.getData().name&&(a.alpha=1),a.position.x=prevRockPositions[e].x,e++})})},updateGamePhysics:function(){var e=this.plane;game.physics.arcade.overlap(this.plane,this.ground,function(e,a){stateEND=!0,a.body.destroy()},null,this),ENABLE_ENEMY&&game.physics.arcade.collide(this.plane,this.enemy,function(e,a){stateEND=!0}),this.rocks.forEach(function(a){a.forEach(function(a){"launcher"==a.getData().name?game.physics.arcade.overlap(a,e,function(){a.hasScored||(score++,a.hasScored=!0)},null,this):"star"==a.getData().name?game.physics.arcade.overlap(a,e,function(){0!=a.alpha&&collectSound.play(),a.alpha=0},null,this):game.physics.arcade.collide(a,e,function(){stateEND=!0},null,this)})})},goFullscreen:function(){game.scale.isFullScreen||(game.scale.setMaximum(),game.scale.setScreenSize(!0),game.scale.pageAlignVertically=!1,game.scale.pageAlignHorizontally=!1,game.scale.startFullScreen(!1))}},window.Tplane.state.demo={create:function(){var e=mt.createAll();this.game.stage.disableVisibilityChange=!0;for(var a in e)e[a].mt.movies&&e[a].mt.movies.__main&&e[a].mt.movies.__main.start().loop()}};